{"ast":null,"code":"import _objectSpread from \"/home/lambamansha/Desktop/faculty_portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/lambamansha/Desktop/faculty_portal/src/views/ProjectList/components/Milestone/index.jsx\";\nimport React, { Component } from \"react\";\nimport Form from \"./Form\";\nimport validate from \"validate.js\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport swal from \"sweetalert\";\nimport { CreateMilestone } from \"api/projects\";\nvalidate.extend(validate.validators.datetime, {\n  // The value is guaranteed not to be null or undefined but otherwise it\n  // could be anything.\n  parse: function (value, options) {\n    return +moment.utc(value);\n  },\n  // Input is a unix timestamp\n  format: function (value, options) {\n    var format = options.dateOnly ? \"YYYY-MM-DD\" : \"YYYY-MM-DD hh:mm:ss\";\n    return moment.utc(value).format(format);\n  }\n});\n\nclass AddMilestone extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeHandler = e => {\n      const _e$target = e.target,\n            name = _e$target.name,\n            value = _e$target.value;\n      this.setState(prevState => {\n        return {\n          data: _objectSpread({}, prevState.data, {\n            [name]: value\n          }),\n          errors: _objectSpread({}, prevState.errors, {\n            [name]: []\n          })\n        };\n      });\n    };\n\n    this.onSubmitHandler = () => {\n      //validation\n      let errors = validate(this.state.data, {\n        title: {\n          presence: {\n            allowEmpty: false,\n            message: \"is required\"\n          }\n        },\n        description: {\n          presence: {\n            allowEmpty: false,\n            message: \"is required\"\n          }\n        },\n        deadline: {\n          presence: {\n            allowEmpty: false,\n            message: \"is required\"\n          },\n          datetime: {\n            earliest: moment.utc().add(1, \"day\"),\n            message: \"should be greater than today's date\"\n          }\n        }\n      }); // check for errors\n\n      if (errors) {\n        this.setState({\n          errors\n        });\n      } else {\n        let projectIds = this.props.selectedRows.map(row => {\n          return row.id;\n        });\n\n        let data = _objectSpread({}, this.state.data, {\n          projectIds\n        });\n\n        CreateMilestone(this.props.token, data).then(data => {\n          swal({\n            title: \"Success\",\n            text: \"Milestone \" + data.title + \" has been added successfully\",\n            button: \"Ok\"\n          });\n          this.props.handleClose();\n        }).catch(error => swal({\n          title: \"Error\",\n          text: error.response.data.message,\n          button: \"Ok\"\n        }));\n      }\n    };\n\n    this.state = {\n      data: {\n        title: \"\",\n        description: \"\",\n        deadline: \"\"\n      },\n      errors: {}\n    };\n  }\n\n  render() {\n    return React.createElement(Form, {\n      open: this.props.open,\n      handleClose: this.props.handleClose,\n      onChangeHandler: this.onChangeHandler,\n      onSubmit: this.onSubmitHandler,\n      errors: this.state.errors,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    });\n  }\n\n}\n\nconst MapStatetoProps = state => {\n  return {\n    token: state.auth.token\n  };\n};\n\nexport default connect(MapStatetoProps)(AddMilestone);","map":{"version":3,"sources":["/home/lambamansha/Desktop/faculty_portal/src/views/ProjectList/components/Milestone/index.jsx"],"names":["React","Component","Form","validate","moment","connect","swal","CreateMilestone","extend","validators","datetime","parse","value","options","utc","format","dateOnly","AddMilestone","constructor","props","onChangeHandler","e","target","name","setState","prevState","data","errors","onSubmitHandler","state","title","presence","allowEmpty","message","description","deadline","earliest","add","projectIds","selectedRows","map","row","id","token","then","text","button","handleClose","catch","error","response","render","open","MapStatetoProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Form from \"./Form\";\nimport validate from \"validate.js\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport swal from \"sweetalert\";\nimport { CreateMilestone } from \"api/projects\";\n\nvalidate.extend(validate.validators.datetime, {\n\t// The value is guaranteed not to be null or undefined but otherwise it\n\t// could be anything.\n\tparse: function(value, options) {\n\t\treturn +moment.utc(value);\n\t},\n\t// Input is a unix timestamp\n\tformat: function(value, options) {\n\t\tvar format = options.dateOnly ? \"YYYY-MM-DD\" : \"YYYY-MM-DD hh:mm:ss\";\n\t\treturn moment.utc(value).format(format);\n\t}\n});\n\nclass AddMilestone extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: {\n\t\t\t\ttitle: \"\",\n\t\t\t\tdescription: \"\",\n\t\t\t\tdeadline: \"\"\n\t\t\t},\n\t\t\terrors: {}\n\t\t};\n\t}\n\tonChangeHandler = e => {\n\t\tconst { name, value } = e.target;\n\n\t\tthis.setState(prevState => {\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\t...prevState.data,\n\t\t\t\t\t[name]: value\n\t\t\t\t},\n\t\t\t\terrors: {\n\t\t\t\t\t...prevState.errors,\n\t\t\t\t\t[name]: []\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t};\n\n\tonSubmitHandler = () => {\n\t\t//validation\n\t\tlet errors = validate(this.state.data, {\n\t\t\ttitle: { presence: { allowEmpty: false, message: \"is required\" } },\n\t\t\tdescription: { presence: { allowEmpty: false, message: \"is required\" } },\n\t\t\tdeadline: {\n\t\t\t\tpresence: { allowEmpty: false, message: \"is required\" },\n\t\t\t\tdatetime: {\n\t\t\t\t\tearliest: moment.utc().add(1, \"day\"),\n\t\t\t\t\tmessage: \"should be greater than today's date\"\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// check for errors\n\t\tif (errors) {\n\t\t\tthis.setState({ errors });\n\t\t} else {\n\t\t\tlet projectIds = this.props.selectedRows.map(row => {\n\t\t\t\treturn row.id;\n\t\t\t});\n\n\t\t\tlet data = {\n\t\t\t\t...this.state.data,\n\t\t\t\tprojectIds\n\t\t\t};\n\t\t\tCreateMilestone(this.props.token, data)\n\t\t\t\t.then(data => {\n\t\t\t\t\tswal({\n\t\t\t\t\t\ttitle: \"Success\",\n\t\t\t\t\t\ttext: \"Milestone \" + data.title + \" has been added successfully\",\n\n\t\t\t\t\t\tbutton: \"Ok\"\n\t\t\t\t\t});\n\t\t\t\t\tthis.props.handleClose();\n\t\t\t\t})\n\t\t\t\t.catch(error =>\n\t\t\t\t\tswal({\n\t\t\t\t\t\ttitle: \"Error\",\n\t\t\t\t\t\ttext: error.response.data.message,\n\n\t\t\t\t\t\tbutton: \"Ok\"\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t}\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Form\n\t\t\t\topen={this.props.open}\n\t\t\t\thandleClose={this.props.handleClose}\n\t\t\t\tonChangeHandler={this.onChangeHandler}\n\t\t\t\tonSubmit={this.onSubmitHandler}\n\t\t\t\terrors={this.state.errors}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nconst MapStatetoProps = state => {\n\treturn {\n\t\ttoken: state.auth.token\n\t};\n};\n\nexport default connect(MapStatetoProps)(AddMilestone);\n"]},"metadata":{},"sourceType":"module"}