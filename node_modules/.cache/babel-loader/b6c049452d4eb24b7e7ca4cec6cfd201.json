{"ast":null,"code":"import _objectSpread from \"/home/lambamansha/Desktop/faculty_portal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/lambamansha/Desktop/faculty_portal/src/views/Project/components/Milestones/components/GiveReview/index.jsx\";\nimport React, { Component } from \"react\";\nimport Form from \"./Form\";\nimport validate from \"validate.js\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport swal from \"sweetalert\";\nimport { SubmissionReview } from \"api/projects\";\n\nclass GiveReview extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeHandler = e => {\n      const _e$target = e.target,\n            name = _e$target.name,\n            value = _e$target.value;\n      this.setState(prevState => {\n        return {\n          data: _objectSpread({}, prevState.data, {\n            [name]: value\n          }),\n          errors: _objectSpread({}, prevState.errors, {\n            [name]: []\n          })\n        };\n      });\n    };\n\n    this.onSubmitHandler = () => {\n      console.log(\"submission handler\"); //validation\n\n      let errors = validate(this.state.data, {\n        review: {\n          presence: {\n            allowEmpty: false,\n            message: \"is required\"\n          }\n        }\n      }); // check for errors\n\n      if (errors) {\n        this.setState({\n          errors\n        });\n      } else {\n        this.setState({\n          isLoading: true\n        });\n        let data = {\n          remark: this.state.data.review,\n          status: this.props.statusOfSubmission\n        };\n        SubmissionReview(this.props.token, data, this.props.submissionId).then(data => {\n          swal({\n            title: \"Success\",\n            text: \"Review has been submitted successfully\",\n            button: \"Ok\"\n          });\n          this.props.handleClose();\n          this.props.updatereview(this.props.submissionId, data.submission);\n        }).catch(error => swal({\n          title: \"Error\",\n          text: error.response.data.message,\n          button: \"Ok\"\n        }));\n      }\n    };\n\n    this.state = {\n      data: {\n        review: \"\",\n        isLoading: false\n      },\n      errors: {}\n    };\n  }\n\n  render() {\n    return React.createElement(Form, {\n      open: this.props.open,\n      handleClose: this.props.handleClose,\n      onChangeHandler: this.onChangeHandler,\n      onSubmit: this.onSubmitHandler,\n      errors: this.state.errors,\n      buttonName: this.props.statusOfSubmission,\n      isLoading: this.state.isLoading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    });\n  }\n\n}\n\nconst MapStatetoProps = state => {\n  return {\n    token: state.auth.token\n  };\n};\n\nexport default connect(MapStatetoProps)(GiveReview);","map":{"version":3,"sources":["/home/lambamansha/Desktop/faculty_portal/src/views/Project/components/Milestones/components/GiveReview/index.jsx"],"names":["React","Component","Form","validate","moment","connect","swal","SubmissionReview","GiveReview","constructor","props","onChangeHandler","e","target","name","value","setState","prevState","data","errors","onSubmitHandler","console","log","state","review","presence","allowEmpty","message","isLoading","remark","status","statusOfSubmission","token","submissionId","then","title","text","button","handleClose","updatereview","submission","catch","error","response","render","open","MapStatetoProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Form from \"./Form\";\nimport validate from \"validate.js\";\nimport moment from \"moment\";\nimport { connect } from \"react-redux\";\nimport swal from \"sweetalert\";\nimport { SubmissionReview } from \"api/projects\";\n\nclass GiveReview extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: {\n\t\t\t\treview: \"\",\n\t\t\t\tisLoading: false\n\t\t\t},\n\t\t\terrors: {}\n\t\t};\n\t}\n\tonChangeHandler = e => {\n\t\tconst { name, value } = e.target;\n\n\t\tthis.setState(prevState => {\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\t...prevState.data,\n\t\t\t\t\t[name]: value\n\t\t\t\t},\n\t\t\t\terrors: {\n\t\t\t\t\t...prevState.errors,\n\t\t\t\t\t[name]: []\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t};\n\n\tonSubmitHandler = () => {\n\t\tconsole.log(\"submission handler\");\n\t\t//validation\n\t\tlet errors = validate(this.state.data, {\n\t\t\treview: { presence: { allowEmpty: false, message: \"is required\" } }\n\t\t});\n\n\t\t// check for errors\n\t\tif (errors) {\n\t\t\tthis.setState({ errors });\n\t\t} else {\n\t\t\tthis.setState({\n\t\t\t\tisLoading: true\n\t\t\t});\n\t\t\tlet data = {\n\t\t\t\tremark: this.state.data.review,\n\t\t\t\tstatus: this.props.statusOfSubmission\n\t\t\t};\n\t\t\tSubmissionReview(this.props.token, data, this.props.submissionId)\n\t\t\t\t.then(data => {\n\t\t\t\t\tswal({\n\t\t\t\t\t\ttitle: \"Success\",\n\t\t\t\t\t\ttext: \"Review has been submitted successfully\",\n\n\t\t\t\t\t\tbutton: \"Ok\"\n\t\t\t\t\t});\n\t\t\t\t\tthis.props.handleClose();\n\t\t\t\t\tthis.props.updatereview(this.props.submissionId, data.submission);\n\t\t\t\t})\n\t\t\t\t.catch(error =>\n\t\t\t\t\tswal({\n\t\t\t\t\t\ttitle: \"Error\",\n\t\t\t\t\t\ttext: error.response.data.message,\n\n\t\t\t\t\t\tbutton: \"Ok\"\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t}\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Form\n\t\t\t\topen={this.props.open}\n\t\t\t\thandleClose={this.props.handleClose}\n\t\t\t\tonChangeHandler={this.onChangeHandler}\n\t\t\t\tonSubmit={this.onSubmitHandler}\n\t\t\t\terrors={this.state.errors}\n\t\t\t\tbuttonName={this.props.statusOfSubmission}\n\t\t\t\tisLoading={this.state.isLoading}\n\t\t\t/>\n\t\t);\n\t}\n}\n\nconst MapStatetoProps = state => {\n\treturn {\n\t\ttoken: state.auth.token\n\t};\n};\n\nexport default connect(MapStatetoProps)(GiveReview);\n"]},"metadata":{},"sourceType":"module"}